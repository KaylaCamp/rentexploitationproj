addTiles() %>%
addPolygons() %>%
addLabelOnlyMarkers(lng = ~INTPTLON, lat = ~INTPTLAT, label = ~NAME.y,
labelOptions = labelOptions(noHide = TRUE)) %>% #labels census tracts
addPolygons(stroke = FALSE, fillOpacity = 0.5,
smoothFactor = 0.5,
color = ~pal(RentTaxRatio),
label = ~RentTaxRatio) %>%
addLegend(pal = pal,
values = ~RentTaxRatio,
opacity = 0.9,
title = "Estimated Rent to Tax Ratio for 2020",
position = "bottomleft")
?addLave
?addLabelOnlyMarkers
#creating map and adding layers
leaflet(HousingDataSpatial) %>%
addTiles() %>%
addPolygons() %>%
addLabelOnlyMarkers(lng = ~INTPTLON, lat = ~INTPTLAT, label = ~County,
labelOptions = labelOptions(noHide = TRUE)) %>% #labels census tracts
addPolygons(stroke = FALSE, fillOpacity = 0.5,
smoothFactor = 0.5,
color = ~pal(RentTaxRatio),
label = ~RentTaxRatio) %>%
addLegend(pal = pal,
values = ~RentTaxRatio,
opacity = 0.9,
title = "Estimated Rent to Tax Ratio for 2020",
position = "bottomleft")
Tenure_By_Income %>%
ggplot(aes(Tenure_By_Income$estimate)) +
geom_histogram() +
facet_wrap(~County)
#Ask dr. claibourne about tables
#importing data
library(readr)
library(tidycensus)
library(tidyverse)
library(tigris)
library(leaflet)
library(sf)
ACS_Housing_Data <- read_csv("Housing_Data.csv")
Income_By_Tenure <- read_csv("Income_By_Tenure.csv")
Tenure <- read_csv("Tenure.csv")
Tenure_By_Income <- read_csv("Tenure_By_Income.csv")
Tenure_By_Income %>%
ggplot(aes(Tenure_By_Income$estimate)) +
geom_histogram() +
facet_wrap(~County)
Tenure_By_Income %>%
ggplot(aes(Tenure_By_Income$estimate)) +
geom_histogram()
Tenure_By_Income %>%
ggplot(aes(Tenure_By_Income$estimate)) +
geom_histogram() +
facet_wrap(~County)
#replacing all household income with the rent occupied household income since that's our focus
ACS_Housing_Data$MedianIncomeE <- Income_By_Tenure$B25119_003E
ACS_Housing_Data$MedianIncomeM <- Income_By_Tenure$B25119_003M
v20 <- load_variables(2020, "acs5", cache = TRUE)
Tenure_By_Income <- v20 %>%
filter(str_detect(name, "B25118")) %>%
full_join(Tenure_By_Income, v20, by = c("name" = "variable")) %>%
select(1,2,5,6,7,8)
Tenure_By_Income <- Tenure_By_Income %>%
mutate(County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
)) |>
select(3, 4, 7, 1, 2, 5, 6)
#Tenure_By_Income %>%
# group_by(label) %>%
#summarize(n = n())
#unique(Tenure_By_Income$label), used this line for the code below, wanted to change the variable name the census gave me
Tenure_By_Income <- Tenure_By_Income %>%
mutate(label = case_when(
label %in% "Estimate!!Total:!!Renter occupied:!!$150,000 or more" ~ "Renter occupied: $>150k",
label %in% "Estimate!!Total:!!Renter occupied:!!$100,000 to $149,999" ~ "Renter occupied: $100k to  $149,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$75,000 to $99,999" ~ "Renter occupied: $75k to $99,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$50,000 to $74,999" ~ "Renter occupied: $50k to $74,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$35,000 to $49,999" ~ "Renter occupied: $35k to $49,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$25,000 to $34,999" ~ "Renter occupied: $25k to $34,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$20,000 to $24,999" ~ "Renter occupied: $20k to $24,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$15,000 to $19,999" ~ "Renter occupied: $15k to $19,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$10,000 to $14,999" ~ "Renter occupied: $10k to $14,999",
label %in% "Estimate!!Total:!!Renter occupied:!!$5,000 to $9,999" ~ "Renter occupied: $5k to $9,999",
label %in% "Estimate!!Total:!!Renter occupied:!!Less than $5,000" ~ "Renter occupied: <$5k",
label %in% "Estimate!!Total:!!Renter occupied:" ~ "Renter Occupied",
label %in% "Estimate!!Total:!!Owner occupied:!!$150,000 or more" ~ "Owner occupied: $>150k",
label %in% "Estimate!!Total:!!Owner occupied:!!$100,000 to $149,999" ~ "Owner occupied: $100k to  $149,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$75,000 to $99,999" ~ "Owner occupied: $75k to $99,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$50,000 to $74,999" ~ "Owner occupied: $50k to $74,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$35,000 to $49,999" ~ "Owner occupied: $35k to $49,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$25,000 to $34,999" ~ "Owner occupied: $25k to $34,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$20,000 to $24,999" ~ "Owner occupied: $20k to $24,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$15,000 to $19,999" ~ "Owner occupied: $15k to $19,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$10,000 to $14,999" ~ "Owner occupied: $10k to $14,999",
label %in% "Estimate!!Total:!!Owner occupied:!!$5,000 to $9,999" ~ "Owner occupied: $5k to $9,999",
label %in% "Estimate!!Total:!!Owner occupied:!!Less than $5,000" ~ "Owner occupied: <$5k",
label %in% "Estimate!!Total:!!Owner occupied:" ~ "Owner Occupied",
label %in% "Estimate!!Total:" ~ "Total"))  %>%
rename(Variable_Code = name, Variable = label)
Tenure_By_Income %>%
ggplot(aes(Tenure_By_Income$estimate)) +
geom_histogram() +
facet_wrap(~County)
Tenure_By_Income %>%
ggplot(aes(Tenure_By_Income$estimate, fill = County)) +
geom_histogram()
View(Tenure_By_Income)
View(Tenure)
# Pull data for Rent Exploitation Analysis
# Charlottesville region
library(tidycensus)
library(tidyverse)
# Tract-level Variables from American Community Survey
# Median gross rent: B25064
# Median real estate taxes: B25103
# MEDIAN GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME: B25071
# Median Household Income: B19013
# Tenure: B25003(s)
# MEDIAN HOUSEHOLD INCOME BY TENURE : B25119 (s)
# TENURE BY HOUSEHOLD INCOME : B25118
#
# Define region
cvl <- c("003", "540", "079","109", "065", "125", "760", "087", "041", "670", "730")
# Albemarle: 003; Charlottesville: 540; Greene: 079; Louisa: 109; Nelson: 125; Fluvanna: 065
#Richmond City: 760, Henrico County: 087, Chesterfield County: 041, Hopewell City: 670, Petersburg City: 730
vars <- c(MedianRent = "B25064_001", MedianTaxes = "B25103_001", MedianIncome = "B19013_001", PercRent0fIncome = "B25071_001")
#tidy output
cvl_rent1 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#wide output
cvl_rent2 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure by Household Income
TenureByIncome <- get_acs(geography = "tract",
table = "B25118",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
View(cvl_rent2)
cvlcharlottlesville <- c("003", "540", "079","109", "065", "125")
cvlrichmond <- c("760", "087", "041", "670", "730")
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
GEOID %in% cvlcharlottesville ~ "Charlottlesville",
GEOID %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14)
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
GEOID %in% cvlcharlottlesville ~ "Charlottlesville",
GEOID %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14)
View(cvl_rent2)
cvl_rent2$GEOID %in% cvlcharlottlesville
str_detect() cvl_rent2$GEOID %in% cvlcharlottlesville
str_detect(cvl_rent2$GEOID, cvlcharlottlesville)
cvl_rent2 %>%
cvlcharlottlesville <- c("51003", "51540", "51079","51109", "51065", "51125")
cvlrichmond <- c("51760", "51087", "51041", "51670", "51730")
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
GEOID %in% cvlcharlottlesville ~ "Charlottlesville",
GEOID %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14)
View(cvl_rent2)
cvl_rent2 %>%
cvlcharlottlesville <- c("51003", "51540", "51079","51109", "51065", "51125")
cvlcharlottlesville <- c("51003", "51540", "51079","51109", "51065", "51125")
filter(GEOID %in% cvlcharlottlesville)
cvl_rent2 %>%
filter(GEOID %in% cvlcharlottlesville)
cvl_rent2 %>%
filter(cvlcharlottlesville %in% GEOID)
cvlcharlottlesville <- c("51003", "51540", "51079","51109", "51065", "51125")
cvlrichmond <- c("51760", "51087", "51041", "51670", "51730")
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County_fips = str_sub(GEOID, 3,5),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
County_fips %in% cvlcharlottlesville ~ "Charlottlesville",
County_fips %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14)
cvlcharlottlesville <- c("51003", "51540", "51079","51109", "51065", "51125")
cvlrichmond <- c("51760", "51087", "51041", "51670", "51730")
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County_fips = str_sub(GEOID, 3,5),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
County_fips %in% cvlcharlottlesville ~ "Charlottlesville",
County_fips %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15)
View(cvl_rent2)
View(cvl_rent2)
cvl_rent2 %>%
filter(County_fips %in% cvlcharlottlesville)
str_detect(cvl_rent2$County_fips, cvlcharlottlesville)
cvlcharlottlesville <- c("003", "540", "079","109", "065", "125")
cvlrichmond <- c("760", "087", "041", "670", "730")
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County_fips = str_sub(GEOID, 3,5),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
County_fips %in% cvlcharlottlesville ~ "Charlottlesville",
County_fips %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15)
View(cvl_rent2)
# Pull data for Rent Exploitation Analysis
# Charlottesville region
library(tidycensus)
library(tidyverse)
# Tract-level Variables from American Community Survey
# Median gross rent: B25064
# Median real estate taxes: B25103
# MEDIAN GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME: B25071
# Median Household Income: B19013
# Tenure: B25003(s)
# MEDIAN HOUSEHOLD INCOME BY TENURE : B25119 (s)
# TENURE BY HOUSEHOLD INCOME : B25118
#
# Define region
cvl <- c("003", "540", "079","109", "065", "125", "760", "087", "041", "670", "730")
# Albemarle: 003; Charlottesville: 540; Greene: 079; Louisa: 109; Nelson: 125; Fluvanna: 065
#Richmond City: 760, Henrico County: 087, Chesterfield County: 041, Hopewell City: 670, Petersburg City: 730
vars <- c(MedianRent = "B25064_001", MedianTaxes = "B25103_001", MedianIncome = "B19013_001", PercRent0fIncome = "B25071_001")
#tidy output
cvl_rent1 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#wide output
cvl_rent2 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure by Household Income
TenureByIncome <- get_acs(geography = "tract",
table = "B25118",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
# Wrangling
# rename variables
# create rent/tax ratio
# add variable for locality: str_contains
# save/output prepped data
# Try reading in exported data to R markdown
# Basic exploration of data
#chanigng column names, creating rent/tax ratio, adding new column for county, reording columns
cvlcharlottlesville <- c("003", "540", "079","109", "065", "125")
cvlrichmond <- c("760", "087", "041", "670", "730")
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM),
County_fips = str_sub(GEOID, 3,5),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
County_fips %in% cvlcharlottlesville ~ "Charlottlesville",
County_fips %in% cvlrichmond ~ "Richmond"
))
View(cvl_rent2)
cvl_rent2 <- cvl_rent2 %>%
select(1, 13, 2, 14, 15, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
View(cvl_rent2)
View(Tenure)
?load_variables
load_variables(2020, "acs5")
v20n <- load_variables(2020, "acs5")
View(v20n)
racetables <- c("B25003A", "B25003B", "B25003C", "B25003D", "B25003E", "B25003I")
TenureByRace <- get_acs(geography = "tract",
table = racetables,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
racevars <- c(White_owners = "B25003A_002", White_renters = "B25003A_003", Black_owners = "B25003B_002", Black_renters = "B25003B_003", NativeAm_owners = "B25003C_002", NativeAm_renters = "B25003C_003", Asian_owners = "B25003D_002", Asian_renters = "B25003D_003", PacificIslander_owner = "B25003E_002", PacificIslander_renter = "B25003E_003", HispanicLatino_owner = "B25003I_002", HispanicLation_renter = "B25003I_003")
TenureByRace <- get_acs(geography = "tract",
variables = racevars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
View(TenureByRace)
Povertyvars <- c(BelowPoverty_White = "B17020A_002", AbovePoverty_White = "B17020A_010", BelowPoverty_Black = "B17020B_002",
AbovePoverty_Black = "B17020B_010", BelowPoverty_NativeAm = "B17020C_002", AbovePoverty_NativeAm = "B17020C_010",
BelowPoverty_Asian = "B17020D_002", AbovePoverty_Asian = "B17020D_010", BelowPoverty_PacificIslander = "B17020E_002",
AbovePoverty_PacificIslander = "B17020E_010", BelowPoverty_HispanicLatino = "B17020I_002",
AbovePoverty_HispanicLatino = "B17020I_010")
PovertyByRace <- get_acs(geography = "tract",
variables = Povertyvars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
View(PovertyByRace)
TenureByRace <- TenureByRace %>%
mutate(County_fips = str_sub(GEOID, 3,5),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
County_fips %in% cvlcharlottlesville ~ "Charlottlesville",
County_fips %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 27, 2, 28, 29, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26)
View(TenureByRace)
PovertyByRace <- PovertyByRace %>%
mutate(County_fips = str_sub(GEOID, 3,5),
County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
str_detect(GEOID, "51760") ~ "Richmond City",
str_detect(GEOID, "51087") ~ "Henrico",
str_detect(GEOID, "51041") ~ "Chesterfield",
str_detect(GEOID, "51670") ~ "Hopewell",
str_detect(GEOID, "51730") ~ "Petersburg City"
),
Region = case_when(
County_fips %in% cvlcharlottlesville ~ "Charlottlesville",
County_fips %in% cvlrichmond ~ "Richmond"
)) |>
select(1, 27, 2, 28, 29, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26)
View(PovertyByRace)
write.csv(cvl_rent2, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Housing_Data.csv", row.names = FALSE)
write.csv(IncomeByTenure, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Income_By_Tenure.csv", row.names = FALSE)
write.csv(Tenure, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure.csv", row.names = FALSE)
write.csv(TenureByIncome, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure_By_Income.csv", row.names = FALSE)
write.csv(TenureByRace, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure_by_race.csv", row.names = FALSE)
write.csv(PovertyByRace, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/ Poverty_by_race.csv", row.names = FALSE)
write.csv(TenureByRace, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenurebyrace.csv", row.names = FALSE)
write.csv(PovertyByRace, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/ Povertybyrace.csv", row.names = FALSE)
