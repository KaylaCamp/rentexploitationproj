county = cvl,
output = "wide")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
# Wrangling
# rename variables
# create rent/tax ratio
# add variable for locality: str_contains
# save/output prepped data
# Try reading in exported data to R markdown
# Basic exploration of data
#chanigng column names, creating rent/tax ratio, adding new column for county, reording columns
cvl_rent2 <- cvl_rent2 |>
rename(MedianRentEst = B25064_001E, MedianRentMOE = B25064_001M, MedianTaxesEst = B25103_001E, MedianTaxesMOE = B25103_001M, MedianIncomeEst = B19013_001E, MedianIncomeMOE = B19013_001M) |>
mutate(RentTaxRatioEst = MedianRentEst/MedianTaxesEst, RentTaxRatioMOE = MedianRentMOE/MedianTaxesMOE) |>
mutate(County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
)) |>
select(1, 2, 11, 3, 4, 5, 6, 7, 8, 9, 10)
# Pull data for Rent Exploitation Analysis
# Charlottesville region
library(tidycensus)
library(tidyverse)
# Tract-level Variables from American Community Survey
# Median gross rent: B25064
# Median real estate taxes: B25103
# MEDIAN GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME: B25071
# Median Household Income: B19013
# Tenure: B25003(s)
# MEDIAN HOUSEHOLD INCOME BY TENURE : B25119 (s)
# TENURE BY HOUSEHOLD INCOME : B25118
#
# Define region
cvl <- c("003", "540", "079","109", "065", "125")
# Albemarle: 003; Charlottesville: 540; Greene: 079; Louisa: 109; Nelson: 125; Fluvanna: 065
vars <- c(MedianRent = "B25064_001", MedianTaxes = "B25103_001", MedianIncome = "B19013_001", PercRent0fIncome = "B25071_001")
#tidy output
cvl_rent1 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#wide output
cvl_rent2 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure by Household Income
TenureByIncome <- get_acs(geography = "tract",
table = "B25118",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
# Pull data for Rent Exploitation Analysis
# Charlottesville region
library(tidycensus)
library(tidyverse)
# Tract-level Variables from American Community Survey
# Median gross rent: B25064
# Median real estate taxes: B25103
# MEDIAN GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME: B25071
# Median Household Income: B19013
# Tenure: B25003(s)
# MEDIAN HOUSEHOLD INCOME BY TENURE : B25119 (s)
# TENURE BY HOUSEHOLD INCOME : B25118
#
# Define region
cvl <- c("003", "540", "079","109", "065", "125")
# Albemarle: 003; Charlottesville: 540; Greene: 079; Louisa: 109; Nelson: 125; Fluvanna: 065
vars <- c(MedianRent = "B25064_001", MedianTaxes = "B25103_001", MedianIncome = "B19013_001", PercRent0fIncome = "B25071_001")
#tidy output
cvl_rent1 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#wide output
cvl_rent2 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure by Household Income
TenureByIncome <- get_acs(geography = "tract",
table = "B25118",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
# Wrangling
# rename variables
# create rent/tax ratio
# add variable for locality: str_contains
# save/output prepped data
# Try reading in exported data to R markdown
# Basic exploration of data
#chanigng column names, creating rent/tax ratio, adding new column for county, reording columns
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM)) |>
mutate(County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
)) |>
select(1, 2, 11, 3, 4, 5, 6, 7, 8, 9, 10)
write.csv(cvl_rent2, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Housing_Data.csv", row.names = FALSE)
write.csv(IncomeByTenure, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Income_By_Tenure.csv", row.names = FALSE)
write.csv(Tenure, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure.csv", row.names = FALSE)
write.csv(TenureByIncome, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure_By_Income.csv", row.names = FALSE)
#Ask dr. claibourne about tables
#importing data
library(readr)
library(tidycensus)
library(tidyverse)
library(tigris)
library(leaflet)
library(sf)
ACS_Housing_Data <- read_csv("Housing_Data.csv")
Income_By_Tenure <- read_csv("Income_By_Tenure.csv")
Tenure <- read_csv("Tenure.csv")
Tenure_By_Income <- read_csv("Tenure_By_Income.csv")
View(ACS_Housing_Data)
# Pull data for Rent Exploitation Analysis
# Charlottesville region
library(tidycensus)
library(tidyverse)
# Tract-level Variables from American Community Survey
# Median gross rent: B25064
# Median real estate taxes: B25103
# MEDIAN GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME: B25071
# Median Household Income: B19013
# Tenure: B25003(s)
# MEDIAN HOUSEHOLD INCOME BY TENURE : B25119 (s)
# TENURE BY HOUSEHOLD INCOME : B25118
#
# Define region
cvl <- c("003", "540", "079","109", "065", "125")
# Albemarle: 003; Charlottesville: 540; Greene: 079; Louisa: 109; Nelson: 125; Fluvanna: 065
vars <- c(MedianRent = "B25064_001", MedianTaxes = "B25103_001", MedianIncome = "B19013_001", PercRent0fIncome = "B25071_001")
#tidy output
cvl_rent1 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#wide output
cvl_rent2 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure by Household Income
TenureByIncome <- get_acs(geography = "tract",
table = "B25118",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
# Wrangling
# rename variables
# create rent/tax ratio
# add variable for locality: str_contains
# save/output prepped data
# Try reading in exported data to R markdown
# Basic exploration of data
#chanigng column names, creating rent/tax ratio, adding new column for county, reording columns
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM))
View(cvl_rent2)
mutate(cvl_rent2, County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
))
cvl_rent2 <- mutate(cvl_rent2, County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
))
View(cvl_rent2)
# Pull data for Rent Exploitation Analysis
# Charlottesville region
library(tidycensus)
library(tidyverse)
# Tract-level Variables from American Community Survey
# Median gross rent: B25064
# Median real estate taxes: B25103
# MEDIAN GROSS RENT AS A PERCENTAGE OF HOUSEHOLD INCOME: B25071
# Median Household Income: B19013
# Tenure: B25003(s)
# MEDIAN HOUSEHOLD INCOME BY TENURE : B25119 (s)
# TENURE BY HOUSEHOLD INCOME : B25118
#
# Define region
cvl <- c("003", "540", "079","109", "065", "125")
# Albemarle: 003; Charlottesville: 540; Greene: 079; Louisa: 109; Nelson: 125; Fluvanna: 065
vars <- c(MedianRent = "B25064_001", MedianTaxes = "B25103_001", MedianIncome = "B19013_001", PercRent0fIncome = "B25071_001")
#tidy output
cvl_rent1 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "tidy")
#wide output
cvl_rent2 <- get_acs(geography = "tract",
variables = vars,
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure by Household Income
TenureByIncome <- get_acs(geography = "tract",
table = "B25118",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Income by Tenure
IncomeByTenure <- get_acs(geography = "tract",
table = "B25119",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
#Table for Tenure (renter or owner)
Tenure <- get_acs(geography = "tract",
table = "B25003",
year = 2020,
state = "51",
survey = "acs5",
county = cvl,
output = "wide")
# Wrangling
# rename variables
# create rent/tax ratio
# add variable for locality: str_contains
# save/output prepped data
# Try reading in exported data to R markdown
# Basic exploration of data
#chanigng column names, creating rent/tax ratio, adding new column for county, reording columns
cvl_rent2 <- cvl_rent2 |>
mutate(RentTaxRatio = MedianRentE/MedianTaxesE,
RentTaxRatioMOE = moe_ratio(MedianRentE, MedianTaxesE, MedianRentM, MedianTaxesM)) |>
mutate(County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
)) |>
select(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
write.csv(cvl_rent2, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Housing_Data.csv", row.names = FALSE)
write.csv(IncomeByTenure, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Income_By_Tenure.csv", row.names = FALSE)
write.csv(Tenure, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure.csv", row.names = FALSE)
write.csv(TenureByIncome, "C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Tenure_By_Income.csv", row.names = FALSE)
#Ask dr. claibourne about tables
#importing data
library(readr)
library(tidycensus)
library(tidyverse)
library(tigris)
library(leaflet)
library(sf)
ACS_Housing_Data <- read_csv("Housing_Data.csv")
Income_By_Tenure <- read_csv("Income_By_Tenure.csv")
Tenure <- read_csv("Tenure.csv")
Tenure_By_Income <- read_csv("Tenure_By_Income.csv")
View(Income_By_Tenure)
#replacing all household income with the rent occupied household income since that's our focus
ACS_Housing_Data$MedianIncomeE <- Income_By_Tenure$B25119_003E
ACS_Housing_Data$MedianIncomeM <- Income_By_Tenure$B25119_003M
View(ACS_Housing_Data)
View(Tenure)
View(TenureByIncome)
View(Tenure_By_Income)
?load_variables
v20 <- load_variables(2020, "acs5", cache = TRUE)
View(v20)
v20 %>%
filter("b25118" %in% name)
v20 %>%
filter("B25118" %in% name)
?base::Logic
?base::logical
v20 %>%
filter(name %in% "B25118")
v20 %>%
filter(str_detect(name, "B25118"))
source("C:/Users/smang/OneDrive/Housing Justice DJA/rentexploitationproject/Data Cleaning/Data Cleaning.R", echo=TRUE)
#Ask dr. claibourne about tables
#importing data
library(readr)
library(tidycensus)
library(tidyverse)
library(tigris)
library(leaflet)
library(sf)
ACS_Housing_Data <- read_csv("Housing_Data.csv")
Income_By_Tenure <- read_csv("Income_By_Tenure.csv")
Tenure <- read_csv("Tenure.csv")
Tenure_By_Income <- read_csv("Tenure_By_Income.csv")
View(Tenure_By_Income)
v20 %>%
filter(str_detect(name, "B25118")) %>%
full_join(Tenure_By_Income, v20, by = c("variable" = "name"))
v20 %>%
filter(str_detect(name, "B25118")) %>%
full_join(Tenure_By_Income, v20, by = c("name" = "variable"))
v20 %>%
filter(str_detect(name, "B25118")) %>%
Tenure_By_Income <- full_join(Tenure_By_Income, v20, by = c("name" = "variable"))
v20 %>%
filter(str_detect(name, "B25118")) %>%
full_join(Tenure_By_Income, v20, by = c("name" = "variable"))
Tenure_By_Income <- v20 %>%
filter(str_detect(name, "B25118")) %>%
full_join(Tenure_By_Income, v20, by = c("name" = "variable")) %>%
select(1,2,5,6,7,8)
View(Tenure_By_Income)
unique(Tenure_By_Income$label)
Tenure_By_Income %>%
rename(Variable_Code = name) %>%
mutate(Variable = case_when(
str_detect(label, "Estimate!!Total:") ~ "Total",
str_detect(label, "Estimate!!Total:!!Owner occupied:") ~ "Owner Occupied",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!Less than $5,000") ~ "Owner occupied: <$5k",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$5,000 to $9,999") ~ "Owner occupied: $5k to $9,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$10,000 to $14,999") ~ "Owner occupied: $10k to $14,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$15,000 to $19,999") ~ "Owner occupied: $15k to $19,999",     str_detect(label, "Estimate!!Total:!!Owner occupied:!!$20,000 to $24,999") ~ "Owner occupied: $20k to $24,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$25,000 to $34,999") ~ "Owner occupied: $25k to $34,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$35,000 to $49,999") ~ "Owner occupied: $35k to $49,999",     str_detect(label, "Estimate!!Total:!!Owner occupied:!!$50,000 to $74,999") ~ "Owner occupied: $50k to $74,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$75,000 to $99,999") ~ "Owner occupied: $75k to $99,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$100,000 to $149,999") ~ "Owner occupied: $100k to  $149,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$150,000 or more") ~ "Owner occupied: $>150k",
str_detect(label, "Estimate!!Total:!!Renter occupied:") ~ "Renter Occupied",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!Less than $5,000") ~ "Renter occupied: <$5k",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$5,000 to $9,999") ~ "Renter occupied: $5k to $9,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$10,000 to $14,999") ~ "Renter occupied: $10k to $14,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$15,000 to $19,999") ~ "Renter occupied: $15k to $19,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$20,000 to $24,999") ~ "Renter occupied: $20k to $24,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$25,000 to $34,999") ~ "Renter occupied: $25k to $34,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$35,000 to $49,999") ~ "Renter occupied: $35k to $49,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$50,000 to $74,999") ~ "Renter occupied: $50k to $74,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$75,000 to $99,999") ~ "Renter occupied: $75k to $99,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$100,000 to $149,999") ~ "Renter occupied: $100k to  $149,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$150,000 or more") ~ "Renter occupied: $>150k"
))
Tenure_By_Income %>%
mutate(label = case_when(
str_detect(label, "Estimate!!Total:") ~ "Total",
str_detect(label, "Estimate!!Total:!!Owner occupied:") ~ "Owner Occupied",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!Less than $5,000") ~ "Owner occupied: <$5k",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$5,000 to $9,999") ~ "Owner occupied: $5k to $9,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$10,000 to $14,999") ~ "Owner occupied: $10k to $14,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$15,000 to $19,999") ~ "Owner occupied: $15k to $19,999",     str_detect(label, "Estimate!!Total:!!Owner occupied:!!$20,000 to $24,999") ~ "Owner occupied: $20k to $24,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$25,000 to $34,999") ~ "Owner occupied: $25k to $34,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$35,000 to $49,999") ~ "Owner occupied: $35k to $49,999",     str_detect(label, "Estimate!!Total:!!Owner occupied:!!$50,000 to $74,999") ~ "Owner occupied: $50k to $74,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$75,000 to $99,999") ~ "Owner occupied: $75k to $99,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$100,000 to $149,999") ~ "Owner occupied: $100k to  $149,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$150,000 or more") ~ "Owner occupied: $>150k",
str_detect(label, "Estimate!!Total:!!Renter occupied:") ~ "Renter Occupied",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!Less than $5,000") ~ "Renter occupied: <$5k",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$5,000 to $9,999") ~ "Renter occupied: $5k to $9,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$10,000 to $14,999") ~ "Renter occupied: $10k to $14,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$15,000 to $19,999") ~ "Renter occupied: $15k to $19,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$20,000 to $24,999") ~ "Renter occupied: $20k to $24,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$25,000 to $34,999") ~ "Renter occupied: $25k to $34,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$35,000 to $49,999") ~ "Renter occupied: $35k to $49,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$50,000 to $74,999") ~ "Renter occupied: $50k to $74,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$75,000 to $99,999") ~ "Renter occupied: $75k to $99,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$100,000 to $149,999") ~ "Renter occupied: $100k to  $149,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$150,000 or more") ~ "Renter occupied: $>150k"
)) %>%
rename(Variable_Code = name, Variable = label)
Tenure_By_Income <- Tenure_By_Income %>%
mutate(label = case_when(
str_detect(label, "Estimate!!Total:") ~ "Total",
str_detect(label, "Estimate!!Total:!!Owner occupied:") ~ "Owner Occupied",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!Less than $5,000") ~ "Owner occupied: <$5k",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$5,000 to $9,999") ~ "Owner occupied: $5k to $9,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$10,000 to $14,999") ~ "Owner occupied: $10k to $14,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$15,000 to $19,999") ~ "Owner occupied: $15k to $19,999",     str_detect(label, "Estimate!!Total:!!Owner occupied:!!$20,000 to $24,999") ~ "Owner occupied: $20k to $24,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$25,000 to $34,999") ~ "Owner occupied: $25k to $34,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$35,000 to $49,999") ~ "Owner occupied: $35k to $49,999",     str_detect(label, "Estimate!!Total:!!Owner occupied:!!$50,000 to $74,999") ~ "Owner occupied: $50k to $74,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$75,000 to $99,999") ~ "Owner occupied: $75k to $99,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$100,000 to $149,999") ~ "Owner occupied: $100k to  $149,999",
str_detect(label, "Estimate!!Total:!!Owner occupied:!!$150,000 or more") ~ "Owner occupied: $>150k",
str_detect(label, "Estimate!!Total:!!Renter occupied:") ~ "Renter Occupied",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!Less than $5,000") ~ "Renter occupied: <$5k",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$5,000 to $9,999") ~ "Renter occupied: $5k to $9,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$10,000 to $14,999") ~ "Renter occupied: $10k to $14,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$15,000 to $19,999") ~ "Renter occupied: $15k to $19,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$20,000 to $24,999") ~ "Renter occupied: $20k to $24,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$25,000 to $34,999") ~ "Renter occupied: $25k to $34,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$35,000 to $49,999") ~ "Renter occupied: $35k to $49,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$50,000 to $74,999") ~ "Renter occupied: $50k to $74,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$75,000 to $99,999") ~ "Renter occupied: $75k to $99,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$100,000 to $149,999") ~ "Renter occupied: $100k to  $149,999",
str_detect(label, "Estimate!!Total:!!Renter occupied:!!$150,000 or more") ~ "Renter occupied: $>150k"
)) %>%
rename(Variable_Code = name, Variable = label) %>%
mutate(County = case_when(
str_detect(GEOID, "51540") ~ "Charlottesville",
str_detect(GEOID, "51109") ~ "Louisa",
str_detect(GEOID, "51125") ~ "Nelson",
str_detect(GEOID, "51065") ~ "Fluvanna",
str_detect(GEOID, "51003") ~ "Albemarle",
str_detect(GEOID, "51079") ~ "Greene",
)) |>
select(3, 4, 7, 1, 2, 5, 6)
View(Tenure_By_Income)
