---
title: "Housing Justice - Rent Exploitation"
author: "Sokona Mangane"
date: '2022-07-06'
output: html_document
code_folding: "hide"
---

We downloaded data from Census.gov using the get_acs function, did some data wrangling and cleaning, wrote them as a csv file so that we can import them into RMarkdown

```{r}
#code_folding: "hide" (hides the code but ppl can see the code if they want to)
knitr::opts_chunk$set(echo =  TRUE, warning = FALSE, message = FALSE) #doesn't show the messages or the warings, only code output, must be its in own code chunk to apply to all the subsequent ones
```

``` {r importing data}

#importing data
library(readr)
library(tidycensus)
library(tidyverse)
library(tigris)
library(leaflet)
library(sf)

ACS_Housing_Data <- read_csv("Housing_Data.csv")
Income_By_Tenure <- read_csv("Income_By_Tenure.csv")
Tenure <- read_csv("Tenure.csv")
Tenure_By_Income <- read_csv("Tenure_By_Income.csv")
Tenure_By_Race <- read_csv("Tenurebyrace.csv")
Poverty_By_Race <- read_csv("_PovertyByRace.csv")


```
#Basic summary statistics: 

## How many renters are there in each census tract? of which demographics?

```{r}
Tenure <- Tenure[, 3:9]
Tenure <- full_join(Tenure, Tenure_By_Race, by = "County_fips")

Tenure %>% 
  mutate(Perc_rentersE = (RentersE/Total_OccupantsE)) %>% 
  group_by(County) %>% 
  summarize(Median_Perc_Renters = median(Perc_rentersE, na.rm = TRUE), Median_Perc_WRenters = median((White_rentersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_WOwners = median((White_ownersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_BRenters = median((Black_rentersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_BOwners = median((Black_ownersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_NativeAmOwners = median((NativeAm_ownersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_NativeAmRenters = median((NativeAm_rentersE/Total_OccupantsE), na.rm = TRUE),  Median_Perc_AsianOwners = median((Asian_ownersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_AsianRenters = median((Asian_rentersE/Total_OccupantsE), na.rm = TRUE), Median_Perc_PacificIslanderOwner = median((PacificIslander_ownerE/Total_OccupantsE), na.rm = TRUE), Median_Perc_PacificIslanderRenter = median((PacificIslander_renterE/Total_OccupantsE), na.rm = TRUE), Median_Perc_HispanicLatinoOwner = median((HispanicLatino_ownerE/Total_OccupantsE), na.rm = TRUE), Median_Perc_HispanicLationRenterE = median((HispanicLation_renterE/Total_OccupantsE), na.rm = TRUE)) %>% 
  mutate(across(c(2:14), scales::percent))

```

# What is the average rent, income, and real estate taxes paid in each census tract? 
# What is the average rent to tax ration in each census tract?
# What is the Average percent of rent of income in each census tract? Thus, which census tract is the msot rent burden?
# What does the income and ratio look like there?
# How many are below the poverty level in this tract? and which demographics?
# What is the income distribution in this census tract look like?
# Which census tract has the most students?
# What does the income, and ratio look like there? 
# What are the income distributions in each census tract?
# How does this compare to the average gini index and who's below poverty in each tract?
# Which demographics are most likely to be below poverty and above (or at) in each census tract?

 
 What's considered low-income is dependent on the cost of living of that location, thus, we used the [HUD's](https://www.huduser.gov/portal/datasets/il/il2022/2022summary.odn) measure of Low-Income in Chartlottesville and Richmond as our threshold as well. Below is the Median Family Income for these cities and the definitions used by the HUD.
 
* Low-Income: "The calculation normally used, therefore, is to set the 4-person low-income limit at 1.6 (i.e. 80%/50%) times the relevant 4-person very low income limit"  
* Very Low-Income: "The 4-person Very Low-Income Limit (VLIL) is based on 50% of the median family income estimated for the Charlottesville, VA MSA."
* Extremely Low-Income: "The FY 2014 Consolidated Appropriations Act changed the definition of extremely low-income to be the greater of 30/50ths (60 percent) of the Section 8 very low-income limit or the poverty guideline as established by the Department of Health and Human Services (HHS), provided that this amount is not greater than the Section 8 50% very low-income limit."

The numbers on the site are after they've done their adjustments. We also looked at the [national poverty thresholds set by the Census Bureau] (https://www.census.gov/data/tables/time-series/demo/income-poverty/historical-poverty-thresholds.html). Both websites have poverty levels depending on the family size. The Census Bureau also accounted for the number of children, whereas the HUD sets these thresholds based on the houshold occupancy. Therefore, we looked at the [Average Household Size Data Table](https://data.census.gov/cedsci/table?q=B25010) and calculated the Average in the counties we were looking at (Richmond: 2.5 and Chartlottesville: 2.34). We used the thresdolds for a family of 2.5 people (with no children). According to the Census Bureau, the weight average poverty thresholds for a family of 2.5 people is $18,662, which is way below the extremely low-income limits in Charlottesville and Richmond. 

(also include how you had to work iwht the categories already set by the cenus bureau, also note that the median for charlottesville excludes louisa county)
 
Richmond
 
Median Family Income: $101,000
 
The Richmond, VA MSA contains the following areas: Amelia County, VA; Charles City County, VA; Chesterfield County, VA; Dinwiddie County, VA; Goochland County, VA; Hanover County, VA; Henrico County, VA; King William County, VA; New Kent County, VA; Powhatan County, VA; Prince George County, VA; Sussex County, VA; Colonial Heights city, VA; Hopewell city, VA; Petersburg city, VA; and Richmond city, VA. 

Charlottesville

Median Family Income: $111,200




The Charlottesville, VA MSA contains the following areas: Albemarle County, VA; Fluvanna County, VA; Greene County, VA; Nelson County, VA; and Charlottesville city, VA.




## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
