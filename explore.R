# Explore rent to tax ratio measure
# and some mapping

library(tidyverse)
library(tigris)
library(sf)

cvl_rent2 <- readRDS("cvl_rent.RDS")
cvl <- c("003", "540", "079","109", "065", "125")

ggplot(cvl_rent2, aes(x = rent_tax_ratio)) +
  geom_histogram(binwidth = .05)
# what's the outlier? Albemarle 113.02

# more viz and summarization, including of componenets (rent, tax)

# Mapping ----
# get tract shapefiles
cvl_tracts <- tracts(state = "51", county = cvl, year = 2020)

cvl_rents <- cvl_tracts %>% 
  left_join(cvl_rent2, by = "GEOID") # by = c("GEOID1" = "GEOID2")

ggplot(cvl_rents) +
  geom_sf(aes(fill = county)) +
  theme_void()
